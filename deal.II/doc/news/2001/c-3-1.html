<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
   "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
  <head>
    <link href="../../screen.css" rel="StyleSheet" title="deal.II Homepage" media="screen">
    <link href="../../print.css" rel="StyleSheet" title="deal.II Homepage" media="print">
    <title>The deal.II news page</title>
    <meta name="author" content="Wolfgang Bangerth, Guido Kanschat, and others">
    <meta name="keywords" content="deal.II"></head>

<body>


<h2>Changes after Version 3.1</h2>

This is a quite extensive list of changes made after the release of 
<acronym>deal.II</acronym> version 3.1. It is subdivided into changes
made to the three sub-libraries <a href="#base">base</a>, 
<a href="#lac">lac</a>, and <a href="#deal.II">deal.II</a>, as well as
changes to the <a href="#general">general infrastructure,
documentation, etc</a>.



<a name="general"></a>
<h3>General</h3>

<ol>
  <li> <p> 
       New: The finite element classes have been redesigned from
       scratch to allow also elements that depend on the actual cell
       shape, like Raviart-Thomas, BDM or edge elements. Presently, we
       have implemented continuous and discontinous Lagrange elements,
       that can be easily extended to higher degree. E.g. for
       continuous FEs we've already implemented elements up to degree
       four, for discontinuous FEs up to degree 10.
       </p>

       <p> 
       Furthermore we have totally reimplemented the mapping
       between unit and real cell.  In future we won't be restricted
       to Q<sub>1</sub> mapping any more, but we will have
       Q<sub>p</sub> mappings of arbitrary degree p. Presently
       implemented are mappings up to degree four in 2d, and degree
       three in 3d. This allows to approximate curved boundaries not
       only by straight lines (linear approximation) but also by
       quadratic, cubic, etc approximation. The finite elements will
       be able to be combined with arbitrary mappings. So in future we
       can use subparametric, iso- as well as superparametric
       elements.
       </p>

       <p>
       The new implementation uses a totally new structure of
       communication between <code>FEValues</code>, the
       <code>FiniteElements</code> and the Mappings. Despite of this,
       the new structure will almost not be 'visible' to the user of
       <acronym>deal.II</acronym> as we tried to retain the interface
       to the user (mainly that of <code>FEValues</code>) as far as
       possible.
       <br>
       (RH & GK 2001/03/13)
       </p>

  <li> <p>
       New: There is now some support to include and use routines from the 
       <a href="http://www.cse.clrc.ac.uk/Activity/HSL" 
       target="_top">Harwell Subroutine Library</a>.
       (See the <a href="../../readme.html#external-libs" target="body">ReadMe</a>
       file for more information on installation of HSL
       subroutines.)
       <br>
       (WB 2001/01/30)
       </p>

  <li> <p>
       New: The <code>./configure</code> script now checks for the
       existence of a Fortran 77 compiler, and sets its path, some
       compiler flags and the libraries to be linked in when mixing
       C++ and F77 in some variables in the file
       <code>common/Make.global_options</code> (see also
       <a href="../../development/makefiles.html" target="body">this
       page</a>).
       <br>
       (WB 2000/12/30)
       </p>
</ol>



<a name="base"></a>
<h3>base</h3>

<ol>
  <li> <p>
       New: function <code>contract</code> for two arguments of
       <code class="class">Tensor&lt;1,dim&gt;</code>
       <br>
       (GK 2001/03/05)
       </p>

  <li> <p> New: <code class="class">Logstream</code>.<code
       class="member">log_time_differences (bool)</code> makes <code
       class="class">Logstream</code> print the time since the last
       log line instead of accumulated time since program start.
       <br>
       (GK 2001/03/05)
       </p>


  <li> <p> Fix: <code class="class">Logstream</code>.<code
       class="member">pop()</code> does not perform anything on empty
       stacks.
       <br>
       (GK 2001/03/05)
       </p>


  <li> <p>
       Change: Sort the quadrature points of each <code
       class="class">Quadrature&lt;1&gt;</code> in ascending order. This
       actually changed the order of the points of only <code
       class="class">QGauss4</code> and <code
       class="class">QGauss5</code>.
       <br>
       (Ralf Hartmann 2001/01/22)
       </p>

  <li> <p>
       New: function <code>contract</code> for two arguments of
       <code class="class">Tensor&lt;1,dim&gt;</code>
       <br>
       (GK 2001/01/15)
       </p>
</ol>



<a name="lac"></a>
<h3>lac</h3>

<ol>
  <li> <p> 
       Removed: The explicite instantiations of <code
       class="class">SparseMatrix<long double></code> are removed as a
       prerelease of gcc3.0 fails to compile it. Now the user of
       SparseMatrix<long double></code> needs to include
       <code>lac/include/lac/sparse_matrix.templates.h</code> into his
       source file and to use a different compiler, e.g. gcc 2.95.2 or
       a future version of gcc3.0 (that will then hopefully fixed).
       <br>
       (RH 2001/03/14)
       </p>
  
  <li> <p> New: class <code
       class="class">BlockMatrixArray&lt;MATRIX&gt;</code> implements
       a block matrix based on an array of matrix pointers. Since this
       array may be incomplete, no direct access to entries is
       allowed. Matrix blocks may be scaled and transposed.
       <br>
       (GK 2001/02/13)
       </p>

  <li> <p>
       New: There is now some support to include and use routines from the 
       <a href="http://www.cse.clrc.ac.uk/Activity/HSL" 
       target="_top">Harwell Subroutine Library</a>, and support
       classes 
       <code class="class">SparseDirectMA27</code> and
       <code class="class">SparseDirectMA47</code>
       for the sparse direct solvers MA27 and MA47.
       (See the <a href="../../readme.html#external-libs" target="body">ReadMe</a>
       file for more information on installation of HSL
       subroutines.)
       <br>
       (WB 2001/01/30)
       </p>

</ol>



<a name="deal.II"></a>
<h3>deal.II</h3>

<ol>
  <li> <p>
       We now unconditionally include
       <code>deal.II/include/grid/tria_accessor.templates.h</code>
       (which containts some inline functions for triangulation
       accessor classes) into 
       <code>deal.II/include/grid/tria_accessor.h</code> to work
       around a problem with gcc3.0 which does not place a copy of
       these functions into the library. Previously we only included
       the file in optimized mode.
       <br>
       (RH 2001/03/14)
       </p>

  <li> <p>
       The class <code class="class">GridReordering::Cell</code> has
       now a copy constructor to work around a bug in a gcc3.0
       snapshot.
       <br>
       (RH, WB 2001/03/14)
       </p>

  <li> <p>
       Changed: when refining a hexahedron in 3d, the rules by which
       the new vertices at the centers of the faces and at the center
       of the cell are placed, are changed. They are changed in a way
       as to minimize the distortion of the resulting cells from the
       optimal shape and to make them look as much alike as possible
       to generate a smoother grid.
       <br>
       (WB 2001/03/02)
       </p>

  <li> <p>
       Fix: the <code
       class="member">DoFTools::compute_intergrid_constraints</code>
       function took memory quadratic in the number of degrees of
       freedom. This is now reduced to linear behaviour, with a
       constant that depends on the number of levels by which the two
       grids differ.
       <br>
       (WB 2001/02/26)
       </p>

  <li> <p>
       Fix: in the triangulation, the <code
       class="member">straight_boundary</code> variable, which is a
       reference, was assigned the address of a temporary object. It
       is unclear how this could have worked for three years, but it
       apparently did...
       <br>
       (WB 2001/02/26)
       </p>

  <li> <p> 
       New: The <code class="class">DoFTools</code> class now has
       a function <code class="member">count_dofs_per_component</code>
       that counts the number of degrees of freedom in each of the
       components of the finite element, i.e. how many degrees of
       freedom there are on the global mesh for each variable (field).
       <br>
       (WB 2001/02/22)
       </p>

  <li> <p>
       New: The <code class="class">CellAccessor</code> class now has a function
       <code class="member">has_boundary_lines</code> that mostly has
       the same semantics that <code class="member">at_boundary</code>
       has, but also covers the case that a hexahedron in 3d may be at
       the boundary only by one line, rather than by a whole face. In
       that case, <code class="member">at_boundary</code> reports
       false, while <code class="member">has_boundary_lines</code>
       reports true.
       <br>
       (WB 2001/02/21)
       </p>

  <li> <p>
       New: There is now a function
       <code class="member">ConstraintMatrix::merge</code> that merges
       the constraints represented by two constraint matrices into one
       object.
       <br>
       (WB 2001/01/31)
       </p>
</ol>

<hr>
Last update $Date$

</body>
</html>
