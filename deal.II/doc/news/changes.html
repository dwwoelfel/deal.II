<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link href="../screen.css" rel="StyleSheet">
  <title>The deal.II news page</title>
  <meta name="author" content="the deal.II authors <authors@dealii.org>">
  <meta name="copyright" content="Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005, 2006 by the deal.II authors">
  <meta name="date" content="$Date$">
  <meta name="keywords" content="deal.II"></head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>


<h2>Changes after Version 5.2</h2>

<p>
This is the list of changes made after the release of 
<acronym>deal.II</acronym> version 5.2. It is subdivided into changes
made to the three sub-libraries <a href="#base">base</a>, 
<a href="#lac">lac</a>, and <a href="#deal.II">deal.II</a>, as well as
changes to the <a href="#general">general infrastructure,
documentation, etc</a>.
</p>

<p>
All entries are signed with the names of the author. Regular
contributor's names are abbreviated by WB (Wolfgang Bangerth), GK
(Guido Kanschat), RH (Ralf Hartmann).
</p>

<a name="incompatible"></a>
<h3 style="color:red">Incompatibilities</h3>

<p style="color:red">
Following are a few modifications to the library that unfortunately
are incompatible with previous versions of the library, but which we
deem necessary for the future maintainability of the
library. Unfortunately, some of these changes will require
modifications to application programs. We apologize for the
inconvenience this causes.
</p>


<ol>
  <li> <p>
       Changed: The template argument of the <code
       class="class">InterGridMap</code> class has been changed. Code
       like e.g. <code
       class="class">InterGridMap&lt;DoFHandler,2&gt;</code> must be
       replaced by <code
       class="class">InterGridMap&lt;DoFHandler&lt;2&gt; &gt;</code>.
       <br> 
       (RH 2006/02/27)
       </p>

  <li> <p>
       Changed: The <code>DoFObjectAccessor</code> and derived classes
       used to take only the space dimension and the dimension of the
       object they represented as template arguments. Now the later
       argument is replaced by the type of DoFHandler they correspond
       to. This may be <code>::DoFHandler</code> or
       <code>hp::DoFHandler</code>.
       <br> 
       (RH 2006/02/10, WB 2005/12/20)
       </p>

  <li> <p>
       Removed: Support for gcc2.95 in particular, and all compilers that do
       not support the <code>std::ostringstream</code> class in general,
       has been removed.
       <br> 
       (WB 2006/02/03)
       </p>

  <li> <p>
       Changed: Several classes related to the storage of data in the
       Triangulation and DoFHandler classes have been moved into internal
       namespaces, and some have also been removed. Since these were not for
       use anywhere outside the library, it is unlikely that this poses
       problems to application programs. On the other hand, it moves common
       names like <code>Line</code> and <code>Quad</code> out of the global
       namespace.
       <br> 
       (WB 2006/01/13)
       </p>

  <li> <p>
       Changed: Previously, if <code>mg_dof_handler</code> was a
       multilevel DoF handler object, calling
       <code>DoFRenumbering::component_wise(mg_dof_handler)</code>)
       didn't quite do what was probably intended: it did an implicit
       cast of <code>mg_dof_handler</code> to its base class,
       <code>DoFHandler</code> and then renumbered the <em>global</em>
       degrees of freedom, but didn't touch the multilevel part. This
       has now been fixed: there is another function that takes a
       <code>MGDoFHandler</code> object and that renumbers the global
       part as well as all levels of the multigrid part. The change is
       incompatible since the previous call now leads to a different
       action; if you really want the old behavior back, cast the
       argument to the base class before the call, like so:
       <code>DoFRenumbering::component_wise(static_cast&lt;DoFHandler&lt;dim&gt;&&gt;(mg_dof_handler))</code>)
       <br> 
       (WB 2005/12/15)
       </p>

  <li> <p>
       Changed: The internal numbering of faces, lines and vertices
       has been reimplemented. Now the numbering scheme uses a
       lexicographic ordering (with x running fastest) whereever
       possible. For more information on the new numbering scheme, see
       the <a
       href="http://ganymed.iwr.uni-heidelberg.de/pipermail/dealii/2005/000827.html">announcement</a>
       on the mailing list.  <br> The ordering of vertices in <code
       class="class">CellData</code> given to the <code
       class="member">Triangulation::create_triangulation</code>
       function has been changed accordingly. For backward
       compatibility there is now a new <code
       class="member">Triangulation::create_triangulation_compatibility</code>
       function which takes <code class="class">CellData</code> in the
       old vertex ordering. However, as this function might not be
       supported forever users are advised to change their code to the
       new numbering scheme and to use the <code
       class="member">Triangulation::create_triangulation</code>
       function.  
       <br> 
       (RH 2005/11/02)
       </p>
</ol>


<a name="general"></a>
<h3>General</h3>

<ol>

  <li> <p>New: a configuration parameter <tt>--with-boost</tt> has been
	introduced, allowing the selection of a previously installed boost
	library instead of the contibuted.
	<br>
	(GK 2006/03/23)
	</p> 

  <li> <p>New: The step-20 tutorial program was added. It shows how to use
       Raviart-Thomas elements to solve a mixed formulation of the Laplace
       equation. It also demonstrates the use of block matrices and vectors,
       and how they can be used to define more complex solvers and
       preconditioners working on the Schur complement.
       <br>
       (WB 2006/02/12)
       </p>

  <li> <p>
       Updated: The <code>deal.II/contrib/boost</code> library has
       been updated to boost version 1.33.1.
       <br>
       (RH 2006/02/08)
       </p>

  <li> <p>
       Improved: Documentation has been greatly enhanced, both in the
       API documentation as well as in the tutorial programs. In
       particular, the step-1 through step-8 tutorial programs have
       been overhauled and in many cases the documentation has been
       rewritten in large parts. The presentation of tutorial programs
       and reference manual should also be nicer and better readable
       in many cases.
       <br>
       (WB 2006/02/07)
       </p>

  <li> <p>
       Changed: Previously, the UMFPACK code was linked into its own
       library, <code>liblac_umfpack.*</code>. Instead, it is now
       directly linked into the <code>liblac.*</code> libraries. This
       makes further linking simpler than before and also simplified
       the link process.
       <br>
       (WB 2006/01/19)
       </p>

  <li> <p>
       Improved: The order of quadrature points is now x fastest, z slowest, as
       well as the vertices of cells. Also, the nodes and subcells of patches
       in DataOutBase follow the same ordering. Output code could be simplified
       a lot, saving 900 lines of code.
       <br>
       (GK 2006/01/18)
       </p>

  <li> <p>
       Improved: The link to the manual now points directly to
       Doxygen's module list, and almost all classes are now grouped
       into modules that capture related functionality.
       <br> 
       (WB 2006/01/16)
       </p>

  <li> <p>
       Improved: If you do have a PETSc installation
       and have set the <code>PETSC_DIR</code> and
       <code>PETSC_ARCH</code> environment variables but do not wish
       <acronym>deal.II</acronym> to be configured for PETSc use, you
       should specify <code>--with-petsc=no</code> as a flag during
       configuration. 
       <br> 
       (WB 2006/01/16)
       </p>

  <li> <p>
       Improved: In all directories, including those for tutorial
       programs, we generate a file called <code>Makefile.dep</code>
       that lists the dependencies of object files on source files,
       and that the <code>make</code> uses to determine which files to
       recompile. If the generation of this file failed (for example
       if <code>LD_LIBRARY_PATH</code> hadn't been set correctly), a
       number of very strange things would happen, among others the
       attempt to link an empty object file. This was almost
       impossible to figure out if you didn't know what was going
       on. This mechanism has now been robustified and should yield
       better error messages.
       <br> 
       (WB 2005/11/23)
       </p>

  <li> <p>
       New: The dynamic libraries, which is the name of shared libs
       under Apples OSX, are now supported on these platforms and
       enabled by default. They should safe a lot of harddisk space.
       <br> 
       (Oliver Kayser-Herold 2005/10/20)
       </p>

  <li> <p>
       Fixed: The <tt>Tecplot</tt> library (<tt>tecio.a</tt>) was
       detected but not added to <tt>LIBS</tt>. This is now fixed.
       <br> 
       (RH 2005/09/23)
       </p>

  <li> <p>
       New: <tt>configure</tt> will automatically detect a
       <tt>NetCDF</tt> installation, when its path is given by the
       <tt>NETCDF_DIR</tt> environment variable. The path of the
       <tt>NetCDF</tt> installation directory can also be specified
       through the <tt>--with-netcdf=/path/to/netcdf</tt> configure
       option.
       <br> 
       (RH 2005/09/23)
       </p>

  <li> <p>
       Fixed: The PETSc libraries have been relinked each time
       <tt>make</tt> was called. Now, the PETSc libraries will only be
       relinked if necessary.
       <br> 
       (RH 2005/09/15)
       </p>

</ol>



<a name="base"></a>
<h3>base</h3>

<ol>

  <li> <p> New: The various tensor classes can now effectively be reset to zero
       by simply writing <code>t=0;</code> as has long been allowed for
       matrices and vectors.
       <br>
       (WB 2006/03/24)
       </p>

  <li> <p> New: The new <code
       class="member">deal_II_numbers::is_finite</code> function can
       be used to check whether a floating point number is finite,
       i.e. neither plus or minus infinite nor NaN (not a number);
       it is in the new include file <tt>base/numbers.h</tt>, which will
       contain non-configured inline functions of this type.
       <br>
       (WB 2006/03/15) (GK 2006/03/22)
       </p>

  <li> <p> Improved: If the C++ runtime environment allows it, we now
       demangle stacktraces generated whenever an exception is thrown.
       <br>
       (WB 2006/03/14)
       </p>

  <li> <p> Improved: The function <code class="class">Subscriptor</code>::<code
       class="member">list_subscribers</code> logs all current subscribers of an
       object to <tt>deallog</tt>.
       <br>
       (GK 2006/03/08)
       </p>

  <li> <p>Fixed: Writing a denormal "NaN" through <code
       class="class">LogStream</code> objects such as 
       <code class="member">deallog</code> erroneously printed zero, rather
       than "nan". This is now fixed.
       <br>
       (Luca Heltai, WB 2006/03/07)
       </p>

  <li> <p>Improved: The <code class="class">TableBase</code> base class of all
       the <code class="class">Table</code> classes had an
       <code class="member">>operator()</code> that takes a <code>TableIndices</code> object
       that represents the entire set of indices at once. However, due to C++
       name lookup rules, this operator wasn't accessible through the
       <code class="class">Table</code> class without explicitly specifying the base class
       name. This is now fixed by also providing a similar
       <code class="member">>operator()</code> in the derived classes.
       <br>
       (WB 2006/02/21)
       </p>

  <li> <p>Fixed: The <code class="class">QGauss</code> constructor
       hangs on x86 linux systems when deal.II is run from inside
       MATLAB. The reason is that while the processor offers long
       double accuracy, MATLAB switches off support for that inside
       the CPU. It therefore leaves codes that expect the additional
       accuracy high and dry. Annoyingly, these codes of course run
       just fine outside of MATLAB's environment. This behavior leads
       to an infinite loop inside the QGauss constructor, where we
       want to use the additional accuracy to compute quadrature
       points to high precision. To avoid the infinite loop, we now
       check during runtime whether the extra precision is available,
       not only at compile time.
       <br>
       (Christian Kamm, WB 2006/02/21)
       </p>

  <li> <p>Fixed: The <code class="member">ParameterHandler::get_integer</code>
       had an erroneous check that the value given for a parameter really
       represented an integer. This check always succeeded, even in face of an
       error, and a zero value was returned every time the value in the
       parameter file happened to be not an integer.
       <br>
       (WB 2006/02/17)
       </p>

  <li> <p>Improved: The <code class="class">ComponentSelect</code> class can
       now also handle the case that one wants to select multiple vector
       components at once, not only a single one.
       <br>
       (WB 2006/02/12)
       </p>

  <li> <p>Improved: A new function <code class="class">TableBase</code>::<code
       class="member">fill</code>, filling the whole table with the same
       element has been introduced.
       <br>
       (GK 2006/01/18)
       </p>

  <li> <p>Improved: <code class="class">DataOutBase</code> now writes binary
       files for OpenDX.
       <br>
       (GK 2006/01/18)
       </p>

  <li> <p>
       New: There are now functions
       <code>ParameterHandler::set</code> that allow to set the value of a
       parameter to something different later on.
       <br>
       (Marc Secanell, WB 2006/1/2)
       </p>

  <li> <p>
       New: There are new functions
       <code>Utilities::match_at_string_start</code> and 
       <code>Utilities::get_integer_at_position</code>.
       <br>
       (WB 2005/12/19)
       </p>

  <li> <p>
       Fixed: The computation of <code>HMIN</code> and
       <code>HMAX</code> in <code
       class="member">DataOutBase::write_povray</code> has been
       wrong. This is now fixed.
       <br>
       (RH 2005/11/02)
       </p>

  <li> <p>
       Fixed: <code
       class="member">DataOutBase&lt;2,3&gt;::write_tecplot_binary</code>
       did not write the <code>z</code> coordinates. This is now
       fixed.
       <br>
       (RH 2005/09/28)
       </p>

  <li> <p>
       Fixed: The <tt>tecplot_binary</tt> <code
       class="class">OutputFormat</code> has been added to <code
       class="member">DataOutBase::get_output_format_names</code>. Now
       an exception will be raised if <code
       class="member">write_tecplot_binary</code> is invoked without
       specifying the filename through the <code
       class="class">DataOutBase::TecplotFlags</code> interface.
       <br> 
       (RH 2005/09/23)
       </p>

  <li> <p>
       New: There are now new <code
       class="member">get_n_mpi_processes</code> and <code
       class="member">get_this_mpi_process</code> functions in the
       <code class="class">Utilities::System</code> namespace. In case
       of a code not running in parallel, they simply return 1 and 0,
       respectively.
       <br> 
       (RH 2005/09/20)
       </p>
</ol>



<a name="lac"></a>
<h3>lac</h3>

<ol>
  <li> <p>
       Improved: All matrix (and some vector) classes now check whether
       entries written into them represent finite floating point
       values. This should catch some bugs earlier where one writes
       infinite or NaN values into a matrix only to realize later that
       the linear solver fails.
       <br>
       (Stephan Kramer, WB 2006/03/15)
       </p>  

  <li> <p>
       Changed: There are new <code
       class="class">FullMatrix</code>::<code
       class="member">equ</code> functions which assign <tt>this</tt>
       matrix to the linear combination of one, two or three
       matrices. Also there is now a new <code
       class="class">Vector</code>::<code class="member">equ</code>
       function for three vectors.
       <br>
       (RH 2006/02/21)
       </p>  

  <li> <p>
       Fixed: The <code
       class="class">SolverMinRes</code> class did not work
       with the <code class="class">BlockVector</code> class.
       This is now fixed.
       <br>
       (Luca Heltai 2006/02/19)
       </p>  

  <li> <p>
       Changed: There are now new <code
       class="class">FullMatrix</code>::<code
       class="member">add</code> functions which add two and three
       scaled matrices.
       <br>
       (RH 2006/02/16)
       </p>  

  <li> <p>
       Changed: The matrix classes <code
       class="class">FullMatrix</code>, <code
       class="class">SparseMatrix</code>, <code
       class="class">SparseMatrixEZ</code> and <code
       class="class">BlockMatrixBase</code> now have an <code
       class="member">add</code> function analogous to the <code
       class="member">add</code> of vector classes. The old <code
       class="member">add_scaled</code> functions are now deprecated.
       <br>
       (RH 2006/02/16)
       </p>  

  <li> <p>       
       Improved: <code class="class">BlockMatrixArray</code>::<code
       class="member">enter_aux</code> allows using matrices without
       adding vector multiplication by using <code
       class="class">PointerMatrixAux</code>.
       <br>
       (GK 2006/02/02)
       </p>  

  <li> <p>
       New: The class <code class="class">PointerMatrixAux</code> was
       introduced for use with matrix classes lacking the adding
       vector multiplication functions. It implements these by using
       its own auxiliary vector.
       <br>
       (GK 2006/02/02)
       </p>

  <li> <p>
       Improved: The <code class="class">FilteredMatrix</code> class
       was able to filter only the <code class="class">SparseMatrix</code>
       matrix class.
       A new (faster) version is now in its place with the same interface 
       that is able to perform such a filter on anything that provides 
       the usual matrix vector operations.
       <br> 
       (Luca Heltai 2006/01/09)
       </p>

  <li> <p>
       New: All solver classes took an argument of type <code
       class="class">VectorMemory</code> which they use to allocate
       memory for temporary vectors. A clever implementation of this
       class might allow reusing temporary vectors, and thus reduce
       the overhead of repeatedly allocating and freeing
       memory. However, almost all instances of using these classes
       used the <code class="class">PrimitiveVectorMemory</code>
       class. The solver class have now been changed so that if one
       omits the respective argument, they fall back to using such a
       memory object. Also, all example programs that did not
       specifically use a different memory allocation class, have been
       changed to not specify anything at all, and thus fall back to
       the default.
       <br> 
       (WB 2005/11/23)
       </p>

  <li> <p>
       Fixed: The <code class="class">SparseMatrix</code> iterators had a
       problem when one wrote code like <code>iterator->value()=0</code>
       (i.e. with a zero integer, rather than a floating point number on the
       right), in that that opened up a second conversion sequence and the
       compiler complained about an ambiguity. This is now fixed.
       <br> 
       (WB 2005/10/17)
       </p>

  <li> <p>
       New: Now the class <code class="class">SparseILU</code> supports
       also the <code class="member">Tvmult</code> method. This feature
       allows the straightforward use of <code class="class">SparseILU</code>
       as a multigrid smoother within the framework.
       <br> 
       (Oliver Kayser-Herold 2005/09/15)
       </p>
</ol>



<a name="deal.II"></a>
<h3>deal.II</h3>

<ol>
  <li> <p>
       Fixed: An exception was generated when trying to interpolate
       boundary values for a primitive component of a composite finite
       element that also has non-primitive base elements (for example,
       trying to interpolate boundary values for a the last component
       of a RT x Q1 element). This is now fixed.
       <br> 
       (WB 2006/03/27)
       </p>

  <li> <p>
       New: There is a new function <code class="class">FiniteElement</code>::<code
       class="member">face_to_equivalent_cell_index</code> that can
       convert a face index of a degree of freedom into a
       corresponding cell index.
       <br> 
       (WB 2006/03/27)
       </p>

  <li> <p>
       New: There are now functions <code class="class">VectorTools</code>::<code
       class="member">point_value</code> that evaluate the value of a
       finite element function at a given point inside the domain.
       <br> 
       (WB 2006/03/06)
       </p>

  <li> <p> Improved: <code class="class">GridOut</code> now has functions for
       declaring and parsing parameters in a <code
       class="class">ParameterHandler</code>, like used in <code
       class="class">DataOut_Interface</code> for a long time.
       <br>
       (GK 2006/03/06)
       </p>

  <li> <p>
       Improved: The <code class="class">Triangulation</code>, <code
       class="class">PersistentTriangulation</code>, <code
       class="class">DoFHandler</code>, <code
       class="class">hp::DoFHandler</code> and <code
       class="class">MGDoFHandler</code> classes now all have a <code
       class="member">dimension</code> variable which allows to ask
       the template argument <tt>dim</tt> by
       <class="class">SomeClass</code>::<code
       class="member">dimension</code>.
       <br> 
       (RH 2006/02/27)
       </p>

  <li> <p>
       Fixed: When used, the copy constructor of <code
       class="class">MappingQ</code> would lead to memory
       corruption. This is now fixed.
       <br> 
       (RH 2006/02/23)
       </p>

  <li> <p>
       New: There is now a <code
       class="class">StaticMappingQ1</code>::<code
       class="member">mapping</code> object of type <code
       class="class">MappingQ1</code> which is used in several parts
       of the library. This way multiple creation and storage of <code
       class="class">MappingQ1</code> objects can be avoided.
       <br>
       Similar to <code class="class">StaticMappingQ1</code>::<code
       class="member">mapping</code> there is now also an object <code
       class="class">hp::StaticMappingQ1</code>::<code
       class="member">mapping_collection</code> of type <code
       class="class">MappingCollection</code>.
       <br>
       (RH 2006/02/21)
       </p>

  <li> <p>
       New: There is now a <code class="class">GridOut</code>::<code
       class="member">write_gmsh</code> function to write in the gmsh 
       format. It has the same features of the write_ucd one. 
       <br> 
       (Luca Heltai 2006/02/17)
       </p>

  <li> <p>
       Changed: The <code class="class">hp::FECollection</code>::<code
       class="member">get_fe</code>, <code
       class="class">hp::QCollection</code>::<code
       class="member">get_quadrature</code> and <code
       class="class">hp::MappingCollection</code>::<code
       class="member">get_mapping</code> functions are now renamed to
       the standard <code class="member">operator[]</code>
       function. Similarly, the <code
       class="class">FECollection</code>::<code
       class="member">n_finite_elements</code>, <code
       class="class">QCollection</code>::<code
       class="member">n_quadratures</code> and <code
       class="class">MappingCollection</code>::<code
       class="member">n_mappings</code> functions are now renamed to
       the standard <code class="member">size()</code> function.
       <br> 
       (RH 2006/02/10)
       </p>

  <li> <p>
       Improved: <code class="class">GridGenerator</code>::<code
       class="member">half_hyper_ball</code> now is implemented also 
       in three dimensions, and the boundary now is colored with 0 and one 
       respectively on the curved and plane.
       <br> 
       (Luca Heltai 2006/02/07)
       </p>

  <li> <p>
       Improved: <code class="class">FiniteElementData</code> and
       <code class="class">FiniteElement</code> now support the
       concept of blocks along with components. See the glossary for
       the difference.
       <br>
       (GK 2006/01/25)
       </p>

  <li> <p>
       Fixed: The <code class="class">MGDoFHandler</code>::<code
       class="member">distribute_dofs</code> and <code
       class="member">renumber</code> functions could not handle
       coarsened grids (unused vertices, faces and cells). This is now
       fixed.
       <br> 
       (RH 2006/01/23)
       </p>

  <li> <p>
       New: The <code>Mapping</code> class and derived classes now have
       functions <code>clone()</code> that return a new object of the same
       (derived) type.
       <br> 
       (WB 2006/1/8)
       </p>

  <li> <p>
       Improved: The <code>KellyErrorEstimator</code> class now also allows to
       select the cells on which it is supposed to work by giving a material
       ID, instead of only a subdomain ID.
       <br> 
       (WB 2006/1/4)
       </p>

  <li> <p>
       Improved: A new <code>TriaAccessor::ExcCellHasNoChildren</code>
       exception will be raised if the <code
       class="member">TriaObjectAccessor::child_index</code> function
       is invoked for cells without children.
       <br> 
       (RH 2005/12/09)
       </p>

  <li> <p>
       Fixed: We had a bug in <code class="member">DataOut::build_patches</code>
       that, when used in multithreaded mode, caused an exception to be
       thrown. In particular, this happened when the step-14 program was run on
       dual processor machines and the library was compiled for
       multithreading. This is now fixed.
       <br> 
       (WB 2005/10/20)
       </p>

  <li> <p>
       New: There is now a new <code
       class="member">Triangulation::get_boundary_indicators</code>
       function.
       <br> 
       (RH 2005/09/30)
       </p>

  <li> <p>
       New: There is now a new <code
       class="member">GridTools::delete_unused_vertices</code>
       function. Previously a <tt>private</tt> function in <code
       class="class">GridIn</code> it has now been moved to and made
       <tt>public</tt> in <code class="class">GridTools</code>.
       <br> 
       (RH 2005/09/28)
       </p>

  <li> <p>
       New: The <code
       class="member">GridIn&lt;dim&gt;::read_netcdf(string
       &filename)</code> function reads grids from NetCDF files. The
       only data format currently supported is the <tt>TAU grid
       format</tt>.
       <br> 
       (RH 2005/09/23)
       </p>

  <li> <p>
       Fixed: The <code
       class="member">GridIn&lt;dim&gt;::read(filename, format)</code>
       function ran into an exception when called with
       <tt>Default</tt> format and a filename which does not include
       <tt>/</tt>. This is now fixed.
       <br> 
       (RH 2005/09/21)
       </p>
</ol>

<hr>
Last update $Date$

</body>
</html>
