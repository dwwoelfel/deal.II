<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.1 Transitional//EN"
   "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
  <head>
    <link href="../screen.css" rel="StyleSheet" media="screen">
    <title>The deal.II news page</title>
    <meta name="author" content="the deal.II authors <authors@dealii.org>">
    <meta name="keywords" content="deal.II"></head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<body>


<h2>Changes after Version 4.0</h2>

<p>
This is the list of changes made after the release of 
<acronym>deal.II</acronym> version 4.0. It is subdivided into changes
made to the three sub-libraries <a href="#base">base</a>, 
<a href="#lac">lac</a>, and <a href="#deal.II">deal.II</a>, as well as
changes to the <a href="#general">general infrastructure,
documentation, etc</a>.
</p>

<p>
All entries are signed with the names of the author. Regular
contributor's names are abbreviated by WB (Wolfgang Bangerth), GK
(Guido Kanschat), RH (Ralf Hartmann).
</p>


<a name="incompatible"></a>
<h3 style="color:red">Incompatibilities</h3>

<ol>
  <li> <p>
       Fixed and changed: The <code
       class="class">SolutionTransfer</code><code
       class="member">::(refine_)interpolate(const Vector &in, Vector
       &out)</code> functions now require the <code
       class="member">in</code> and <code class="member">out</code>
       vectors being already of right sizes,
       i.e. <code>in.size()=n_dofs_old</code> and
       <code>out.size()=n_dofs_refined</code>. Furthermore, the <code
       class="class">SolutionTransfer</code><code
       class="member">::(refine_)interpolate(const
       vector&lt;Vector&gt; &all_in, vector&lt;Vector&gt;
       &all_out)</code> now check that the number of in and output
       vectors are the same, i.e.
       <code>all_in.size()=all_out.size()</code>.
       <br>
       (RH 2003/10/24)
       </p>

  <li> <p>
       Changed: The <code class="class">QProjector</code> has functions that
       project a lower-dimensional quadrature formula onto all faces or
       subfaces of a cell. In 3d, it now does this but also adds projections of
       these quadrature formula onto the faces from the other side. We need
       this due to the fact that we now support faces in 3d that have a normal
       vector opposite to the standard direction.
       <br> 
       (WB 2003/10/17)
       </p>

  <li> <p> Moved and changed: The header file
       <tt>include/numerics/dof_renumbering.h</tt> has been moved to the 
       directory <tt>include/dofs</tt>, where it logically
       belongs. Furthermore, the sorting parameter of the function <code
       class="class">DoFRenumbering</code><code
       class="member">::component_wise</code> has changed its meaning. See
       the reference documentation for details.
       <br>
       (GK 2003/07/03)
       </p>
</ol>


<a name="general"></a>
<h3>General</h3>

<ol>
  <li> <p>
       New: The <code>config.h</code> file now declares a variable <code
       class="member">deal_II_numbers::invalid_unsigned_int</code>.
       It is a representation of the largest number that can be put into an
       unsigned integer. This value is widely used throughout the library as a
       marker for an invalid unsigned integer value, such as an invalid array
       index, an invalid array size, and the like.
       <br> 
       (WB 2003/10/24)
       </p>

  <li> <p>
       Augmented: The <code
       class="member">GeometryInfo::child_cell_on_face</code> 
       results in a result that might not be what you expect in 3d in some
       cases. A warning has been added to the documentation, as well as a
       reference to the function to call instead.
       <br> 
       (WB 2003/10/17)
       </p>

  <li> <p> Fixed: The step-14 program had a bug in the rare case that
       there are more CPUs in a machine than there are cells. This is
       now fixed.
       <br>
       (WB 2003/09/23)
       </p>

  <li> <p> Fixed: In the step-14 example program, overly conservative
       quadrature formulas were chosen (with 2N+1 quadrature points per space
       dimension, where N is the degree of polynomials). This is unnecessary,
       and now fixed.
       <br>
       (WB 2003/09/23)
       </p>

  <li> <p> Fixed: On AIX systems, the xlf Fortran77 compiler wasn't recognized 
       due to the fact that when called with -v it generates many pages
       of output, later leading to a shell error. This is now fixed.
       <br>
       (WB 2003/09/19)
       </p>

  <li> <p> Fixed: The elastic example program, step-8, had a bug in the way
       the system matrix is assembled. In effect, we were solving the
       wrong equation. This should now be fixed.
       <br>
       (WB 2003/09/11)
       </p>

  <li> <p> Fixed: When building with both sparse direct solver MA27 and the
       TECPLOT libraries, the <code>detached_ma27</code> would not
       link properly. This is now fixed.
       <br>
       (WB 2003/09/05)
       </p>

  <li> <p> Improved: The script that builds the dependency lists for Makefiles
       has been rewritten in C++, since the previous perl script
       became just too slow after the addition of parts of
       BOOST. Using the old perl script should still work, although it
       simply forwards to the new program. In order to use the new
       one, simply replace the line
       <code><pre>
         $(PERL) $D/common/scripts/make_dependencies.pl ...
       </pre></code>
       by
       <code><pre>
         $D/common/scripts/make_dependencies ...
       </pre></code>
       i.e. call the program directly without the perl interpreter and
       without the file extension for a perl program.
       <br>
       (WB 2003/08/19)
       </p>

  <li> <p> New: First steps to a migration of the documentation from
       <tt>kdoc</tt> to <a href="http://www.doxygen.org">Doxygen</a> have
       been done. It can be generated after installing <a
       href="http://www.doxygen.org">Doxygen</a> by calling <tt>make</tt>
       in <tt>doc/doxygen</tt> and using the preliminary link page <a
       href="../doxygen/index.html">index.html</a> in that directory.
       <br>
       (GK 2003/08/02)
       </p>
</ol>



<a name="base"></a>
<h3>base</h3>

<ol>
  <li> <p> New: There is now a class <code
       class="class">QuadratureSelector</code> that allows to select a
       quadrature formula based on a string argument and possibly a
       number indicating the order of the formula.
       <br>
       (Ralf B. Schulz 2003/10/29)
       </p>

  <li> <p> Fixed: The constructor of the <code class="class">QGauss</code> class
       computed positions and weights of quadrature points in long double accuracy.
       However, on machines where long double is the same as double, it therefore
       never reached the requested accuracy, in effect leading to an infinite loop.
       This is now fixed.
       <br>
       (WB 2003/09/19)
       </p>

  <li> <p> New: The <code class="class">Function</code> class now
       exports the value of its template argument through the static
       member variable <code class="member">dimension</code>.
       <br>
       (WB 2003/09/15)
       </p>

  <li> <p> Changed: The <code
       class="member">ParameterHandler::declare_entry</code> function
       now allows to redeclare an entry that has already been
       declared. This can be used to override a default value
       previously set.
       <br>
       (WB 2003/09/03)
       </p>

  <li> <p> Improved: The <code
       class="member">ParameterHandler::declare_entry</code> function now takes an
       additional parameter (defaulting to the empty string) that can be used
       to document the intent of a parameter. This string, together with the
       default value of an entry, is written to the output by the <code
       class="member">ParameterHandler::print_parameters</code> function that
       can be used to generate a virginial parameter file, or one that contains
       the settings of all parameters used in a computation.
       <br>
       (WB 2003/08/13)
       </p>

  <li> <p> Changed: The <code
       class="member">ParameterHandler::declare_entry</code> previously
       returned a value indicating whether the just-declared entry didn't
       already existed and that the default value matches the given
       pattern. However, this value could only always be true since these two
       conditions were already guarded by assertions in the implementation at
       least in debug mode, so the return value was meaningless. The function
       has now no return type any more.
       <br>
       (WB 2003/08/13)
       </p>

  <li> <p> Improved: <code class="class">Logstream</code>::<code
       class="member">depth_console</code>, <code
       class="class">Logstream</code>::<code class="member">depth_file</code>, <code
       class="class">Logstream</code>::<code
       class="member">log_execution_time</code> and <code
       class="class">Logstream</code>::<code
       class="member">log_time_differences</code> return the previous value.
       <br>
       (GK 2003/06/22)
       </p>
</ol>



<a name="lac"></a>
<h3>lac</h3>

<ol>

  <li> <p> Improved: Initialization routines of class <code
  class="class">SparseMatrix</code> have an additional parameter
  controlling the storage of diagonal entries.
  <br>
  (GK 2003/11/18)
  </p>

  <li> <p> New: 
       <code class="class">SolverFGMRES</code> implements the flexible
       GMRES method with varying preconditioner from the right. It is
       also accessible in <code
       class="class">SolverSelector</code> by choosing <tt>fgmres</tt>.
       <br>
       (GK 2003/10/07)
       </p>

  <li> <p> Changed: The <code class="class">SparseDirectMA27</code>
       class used to store a pointer to the sparsity pattern of the
       matrix. It now releases this as soon as it doesn't need it any
       more.
       <br>
       (WB 2003/09/09)
       </p>

  <li> <p> New: Some of the member matrix-vector functions of the
       <code class="class">BlockSparseMatrix</code> class that
       previously could only be used with arguments of type <code
       class="class">BlockVector</code> can now also be used with the
       usual <code class="class">Vector</code> class provided the
       block matrix has only one block row or column.
       <br>
       (WB 2003/09/09)
       </p>

  <li> <p> Fixed: <code class="class">FullMatrix</code>::<code
       class="member">copy_from</code> didn't compile when copying
       from a sparse matrix. This is now fixed.
       <br>
       (Ralf B. Schulz 2003/09/04)
       </p>

  <li> <p> New: The classes <code class="class">FullMatrix</code> and
       <code class="class">PreconditionBlockJacobi</code> have a <code
       class="class">const_iterator</code>.
       <br>
       (GK 2003/07/18)
       </p>
</ol>



<a name="deal.II"></a>
<h3>deal.II</h3>

<ol>
  <li> <p>
       New: Long requested but never implemented before in the
       library: there is now a function <code
       <class="member">GridTool::find_active_cell_around_point</code>
       that, given a point, finds the active cell in which this point
       lies.
       <br>
       (WB 2003/10/30)
       </p>

  <li> <p>
       New: <code class="class">MGCoarseGridHouseholder</code>
       implements a coarse grid solver using QR-factorization.
       <br>
       (GK 2003/10/17)
       </p>

  <li> <p>
       Fixed: The <code
       class="member">FEFaceValuesBase::boundary_form</code>
       function was declared but not implemented. This is now fixed.
       <br>
       (J&ouml;rg R. Weimar 2003/10/22)
       </p>

  <li> <p>
       Improved: The <code
       class="member">MatrixCreator::create_mass_matrix</code>
       functions are now templatized also on the template argument of
       the <code class="class">SparseMatrix</code> class. This allows
       invoking this function for <code
       class="class">SparseMatrix&lt;double&gt;</code> and <code
       class="class">SparseMatrix&lt;float&gt;</code> objects.
       <br>
       (RH 2003/10/22)
       </p>

  <li> <p>
       New: There is now also a function <code
       class="member">MGDoFCellAccessor::neighbor_child_on_subface</code>
       that returns the result of the <code
       class="member">CellAccessor::neighbor_child_on_subface</code>
       function but converts it so that one can also access MGDoF
       data.
       <br>
       (RH 2003/10/22)
       </p>

  <li> <p>
       New: There are now functions <code
       class="member">CellAccessor::neighbor_child_on_subface</code> and <code
       class="member">DoFCellAccessor::neighbor_child_on_subface</code>
       that should be called instead of using <code
       class="member">GeometryInfo::child_cell_on_face</code> in most cases.
       <br> 
       (WB 2003/10/17)
       </p>

  <li> <p>
       New: <code class="class">GridGenerator</code> has a new
       function <code class="member">subdivided_hyper_rectangle</code> 
       which generates a rectangle with given corner points and possibly 
       different numbers of subdivisions in different directions.
       Use it e.g., to generate a domain of 1*4 length units
       with square cells.
       <br> 
       (Joerg Weimar 2003/09/09)
       </p>

  <li> <p>
       Improved: The 3d grid reordering code in the <code
       class="class">GridReordering</code> class now uses an algorithm
       that is linear in the number of elements. The old code was
       exponential, so this is a vast improvement.
       <br> 
       (Michael Anderson 2003/09/23)
       </p>

  <li> <p>
       Improved: <code class="class">GridOut</code> has a an improved
       functionality for <code class="member">write_eps</code> 
       to color the grid according to the refinement level.
       A corresponding option is included in 
       <code class="class">GridOutFlags::Eps<2></code>.
       <br> 
       (Joerg Weimar 2003/09/09)
       </p>

  <li> <p> New: The <code class="class">TriaAccessor</code>::<code
       class="member">point_inside</code> function is now also
       implemented in 3d.
       <br>
       (Joerg Weimar, WB 2003/09/04)
       </p>

  <li> <p> New: The <code class="class">TriaAccessor</code>::<code
       class="member">recursively_set_material_id</code> function sets
       the material id of the present cell and of all its children,
       grandchildren, etc to the given value.
       <br>
       (WB 2003/09/04)
       </p>

  <li> <p> New: The new <code class="class">FETools</code>::<code
       class="member">get_fe_from_name</code> function can do the
       reverse of the <code class="class">FiniteElement</code>::<code
       class="member">get_name</code> function: it takes a string and
       parses it to regenerate a finite element from it. Useful for
       parsing finite element names from input files.
       <br>
       (WB 2003/07/08)
       </p>

  <li> <p> New: The <code class="class">DataOut_DoFData</code>::<code
       class="member">merge_patches</code> now takes a second
       parameter that indicates a shift for each vertex of the given
       patches to be merged. This is sometimes nice if one wants to
       generate "exploded" views of a collection of subdomains. It is
       also templatized on the first argument, so can merge in some
       other <code class="class">DataOut_DoFData</code> that create
       the same type of patches but are otherwise different.
       <br>
       (WB 2003/06/30)
       </p>

  <li> <p> Fixed: The <code class="class">FETools</code>::<code
       class="member">extrapolate</code> function operates on patches
       of cells, but didn't check whether the grid is at least refined
       once everywhere. If this was not the case, it would generate
       wrong results. It now checks for this, and if the grid has
       unrefined coarse grid cells, an exception is generated.
       <br>
       (WB 2003/06/25)
       </p>

  <li> <p>
       Improved: <code class="class">FEFaceValuesBase</code> has a new
       function <code class="member">orientation</code> accessing a unique
       and consistent orientation for each face.
       <br> 
       (GK 2003/06/23)
       </p>

  <li> <p> 
       Changed: Embedding and restriction matrices for intergrid transfer are
       now computed in the constructor of most elements, rather than taken from
       precomputed and tabulated values. This removes restrictions on which
       elements are available since the old tables were only precomputed for
       certain polynomial degrees and are now available for all.
       <br>
       (WB 2003/06/09)
       </p>

  <li> <p> 
       New: Finite elements got a function <code
       class="member">get_interpolation_matrix</code>, with which they can
       compute interpolations between different finite elements. Most will use
       this to compute interpolations between finite elements of the same kind
       but different polynomial degrees. The <code
       class="member">FETools::get_interpolation_matrix</code> makes use of
       this function if it implements the desired interpolation, and falls back
       to the old algorithm if this is not the case.
       <br>
       (WB 2003/06/09)
       </p>

  <li> <p> 
       New: Finite elements got a function <code
       class="member">get_name</code>, which can be used to identify a finite
       element by its name.
       <br>
       (WB 2003/06/09)
       </p>

  <li> <p> 
       New: Raviart-Thomas elements are now implemented in the <code
       class="class">FE_RaviartThomas</code> class.
       <br>
       (WB 2003/06/09)
       </p>
</ol>

<hr>
Last update $Date$

</body>
</html>
