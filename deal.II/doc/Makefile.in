# $Id$

###############################
# Configured variables

D     = @prefix@
include $D/common/Make.global_options


# default target. make sure validate-xrefs is only run after
# everything else (can't appear in the list of dependencies since
# would be run at the same time for parallel makes)
default: doxygen tutorial development
	@$(MAKE) validate-xrefs

all: default


# specific targets
doxygen: tutorial
	cd doxygen ; rm -f *.tag ; $(MAKE)

tutorial:
	cd tutorial ; $(MAKE)

development:
	cd development ; $(MAKE)

glossary:
	cd glossary ; $(MAKE)


validate-xrefs:
	@echo "Validating cross-references in HTML files."
	$(PERL) $D/common/scripts/validate-xrefs.pl *html
	cd doxygen ; $(MAKE) validate-xrefs
	cd tutorial ; $(MAKE) validate-xrefs
	cd development ; $(MAKE) validate-xrefs
	cd publications ; $(MAKE) validate-xrefs
	cd news ; $(MAKE) validate-xrefs
	cd reports ; $(MAKE) validate-xrefs


clean:
	cd tutorial ; $(MAKE) clean
	cd doxygen ; $(MAKE) clean
	cd development ; $(MAKE) clean
	cd glossary ; $(MAKE) clean
	-rm class_index.html


.PHONY: default doxygen all autogen-doc autogen-doc-all tutorial clean development validate-xrefs glossary
