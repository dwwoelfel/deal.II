<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link href="../screen.css" rel="StyleSheet">
  <title>Writing documentation</title>
  <meta name="author" content="the deal.II authors <authors@dealii.org>">
  <meta name="copyright" content="Copyright (C) 1998, 1999, 2000, 2002, 2003, 2004, 2005 by the deal.II authors">
  <meta name="date" content="$Date$">
  <meta name="CVS_ID" content="$Id$">
  <meta name="keywords" content="deal dealii finite elements fem triangulation">
  <meta http-equiv="content-language" content="en">
</head>
<body>

    <h1>Writing Documentation</h1>

    <p>
    It is our firm belief that software can only be successful if it
    is properly documented. Too many academic software projects die
    prematurely once their creators leave the university or the
    workgroup in which the software was developed, since with their
    creators also knowledge of internal structures, interfaces, and
    the valuable bag of tricks leaves, a gap that can not be closed by
    reading sources, trial-and-error, and guessing.
    </p>

    <p>
    The <acronym>deal.II</acronym> project has therefore from its
    infancy adopted a policy that every aspect of the interface
    needs to be well-documented before its inclusion into the
    source tree. Since we have found that it is impossible to keep
    documentation up-to-date if it is not written directly into the
    program code, we write the documentation directly at the place of
    declaration of a function or class and use automatic tools to
    extract this information from the files and process it into HTML
    for our web-pages, or LaTeX for printing.
    </p>

    <p>
    In addition to the API documentation, we maintain a series of
    <a href="../tutorial/chapter-2.step-by-step/index.html" target="_top">
    well-documented example programs</a>, which also follow a certain
    ``literate programming'' style in that the explanations of what
    is happening are integrated into the program source by means of
    comments, and are extracted by small scripts.
    </p>

    <p>
    This document first explains the basics of 
    <a href="#API" target="body">documenting the API</a> and then of
    <a href="#examples" target="body">writing example programs</a>.
    </p>


    <a name="API"></a>
    <h2>Writing API documentation</h2>

    <p>
    In order to extract documentation from the header files of the
    project, we use 
    <a href="http://www.doxygen.org/" target="_top">doxygen</a>.
    It requires that documentation is written in a form which
    closely follows the 
    <a href="http://java.sun.com/products/jdk/javadoc/index.html" target="_top">
    JavaDoc</a> standard.
    </p>


    <h3>Basic layout of documentation</h3>

    <p>
    Basically, every declaration, whether class or member
    function/variable declaration, global function or namespace, may
    be preceded by a comment of the following form:
    </p>
    <pre>
      /**
       * This is an example documentation.
       *
       * @author Wolfgang Bangerth, 2000
       */
      class TestClass 
      {
        public:
                 /**
		  * Constructor
		  */
          TestClass (); 

                 /**
		  * Example function
		  */
          virtual void test () const = 0;

                 /**
		  * Member variable
		  */
          const unsigned int abc;
      };
    </pre>
    <p>
    <acronym>doxygen</acronym> will then generate a page for the class
    <code>TestClass</code> and document each of the member functions
    and variables. The content of the <code>@author</code> tag will be
    included into the online documentation of the class.
    </p>


    <h3>Extended Layout</h3>

    <p>
    In order to allow better structured output for long comments,
    doxygen supports a great number of tags for enumerations,
    sectioning, markup, and other fields. We encourage you to take a
    look at the <a href="http://www.doxygen.org/"
    target="_top">doxygen webpage</a> to get an overview. However,
    here is a brief summary of the most often used features:
    </p>
    <ul> <li> <em>Itemized lists:</em>
	 By writing comments like the following,
	 <pre>
	   /**
	    * &lt;ul&gt;
	    *   &lt;li&gt; foo
	    *   &lt;li&gt; bar
	    * &lt;/ul&gt;
	    */
	 </pre>
	 you can get itemized lists both in the online and printed
	 documentation:
	 <ul>
	 <li> foo
	 <li> bar
	 </ul> 
	 
	 <p>
	 In other words, one can use standard HTML tags for this
	 task. Likewise, you can get numbered lists by using the
	 respective HTML tags <code>&lt;ol&gt;</code>.
	 </p>

    <li> <em>Verbatim output:</em>
         <p>
	 If you write comments like this,
	 </p>
	 <pre>
	   /**
	    * @verbatim
	    *   void foobar ()
	    *   {
	    *     i = 0;
	    *   };
	    * @endverbatim
	    */
	 </pre>
	 you will get the lines between the verbatim environment with
	 the same formatting and in typewriter font:
	 <pre>
     void foobar ()
     {
       i = 0;
     };
	 </pre>
	 This is useful if you want to include small sample code snippets
	 into your documentation. In particular, it is important that
	 the formatting is preserved, which is not the case for all
	 other text.

    <li> <em>Typewriter font:</em>
	 <p>In order to use typewriter font for instance for function
	 arguments or variables, use the <code>&lt;tt&gt;</code> HTML
	 tag. For a single word, you can also use the form <code>@p
	 one_word_without_spaces</code>.</p>

	 <p>
	 If you refer to member variables and member functions
	 <acronym>doxygen</acronym> has better options than this: use
	 <tt>function_name()</tt> to reference member functions and
	 <tt>#variable_name</tt> for member variables to create links
	 automatically. Refer to the documentation of <a
	 href="http:www.doxygen.org"><acronym>doxygen</acronym></a> to
	 get even more options for global variables.
	 </p>

    <li> <em>Emphasis:</em>
         <p>
	 To generate output in italics, use the <code>@em
	 one_word_without_spaces</code> tag or the <tt>&lt;em&gt;</tt>
	 HTML tag. To generate boldface, use <tt>&lt;b&gt;</tt>
	 </p>

    <li> <em>Formul&aelig;:</em>
         <p>
	 For simple and short formul&aelig; use the <tt>&lt;i&gt;</tt>
	 HTML tag. Remark that you can use <tt>&lt;sub&gt;</tt> and
	 <tt>&lt;sup&gt;</tt> to get subscripts an superscripts,
	 resp. Only for longer formul&aelig; use
	 <tt>$formula$</tt> to generate an LaTeX formula which will be
	 included as a graphical image.
	 </p>

    <li> <em>Sections:</em>
         <p>
	 Sections in class and function documentations can be
	 generated using the <tt>&lt;hN&gt;</tt> HTML headline
	 tags. Headlines inside class documentation should start at
	 level 3 (<tt>&lt;h3&gt;</tt>) to stay consistent with the
	 structure of the <acronym>doxygen</acronym> output.
	 </p>
	 
	 <p>
	 Sections cannot be referenced, unless you add a <tt>&lt;A
	 NAME="..."&gt;</tt> name anchor to them. If you really have
	 to do this, please make sure the name does not interfere with
	 <acronym>doxygen</acronym> generated anchors.
	 </p>
    </ul>



    <a name="examples"></a>
    <h2>Writing example programs</h2>

    <h3>The Tutorial</h3>
    <p>
    At present, the tools that extract information from the example
    programs are rather dumb. They are, to be precise, two Perl
    scripts located in the directory of the
    <code>deal.II/doc/tutorial</code> tree, where the HTML files are
    generated. In principle, they extract plain text from all comments
    in the programs that start with a double slash (C++ style
    comment). Everything else is interpreted as program text and is
    copied verbatim into the output.
    </p>

    <p>
    In the future, it would certainly help if the scripts became a
    little smarter. The only real functionality we presently have
    beyond converting comments to interspersed text is that they can
    extract section headings (take a look at how step-16 does this
    using <tt>@sect</tt> tags), but
    it would be interesting if one could add formulae, for example, or
    if the tools could also generate output in a format that would
    allow for higher quality printing than what we get from HTML.
    </p>

    <h3>Code examples for the usage of single classes</h3>
    <p>
    Writing example files for classes is supported by
    <acronym>doxygen</acronym>. These example files go into
    <tt>deal.II/examples/doxygen</tt>. If they are short,
    documentation should be inside and they are included into the
    documentation with <code>@include filename</code>. Take a look how
    the class <code>BlockMatrixArray</code> does this.
    </p>
    
    <p>
    Larger example files should be documented using the
    <acronym>doxygen</acronym> command <code>@dotinclude</code> and
    related commands. However, if these programs do something
    reasonable and do not only demonstrate a single topic, you should
    consider converting them to a complete example program in the
    <code>step-XX</code> series.
    </p>
    <hr>
    
    <address>
      <a href="../mail.html">The deal.II mailing list</a></address>
<div class="right">
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img border="0"
        src="http://www.w3.org/Icons/valid-html401"
        alt="Valid HTML 4.01!" height="31" width="88"></a>
  </p>
</div>

  </body>
</html>

