<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN"
   "http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
  <head>
    <link href="../screen.css" rel="StyleSheet" media="screen">
    <link href="../print.css" rel="StyleSheet" media="print">
    <title>deal.II  Makefiles</title>
    <meta name="author" content="the deal.II authors <authors@dealii.org>">
    <meta name="keywords" content="deal.II"></head>
  <body>


    <h2>Writing Documentation</h2>

    <p>
    It is our firm belief that software can only be successful if it
    is properly documented. Too many academic software projects die
    prematurely once their creators leave the university or the
    workgroup in which the software was developed, since with their
    creators also knowledge of internal structures, interfaces, and
    the valuable bag of tricks leaves, a gap that can not be closed by
    reading sources, trial-and-error, and guessing.
    </p>

    <p>
    The <acronym>deal.II</acronym> project has therefore from its
    infancy adopted a policy that every aspect of the interface
    needs to be well-documented before its inclusion into the
    source tree. Since we have found that it is impossible to keep
    documentation up-to-date if it is not written directly into the
    program code, we write the documentation directly at the place of
    declaration of a function or class and use automatic tools to
    extract this information from the files and process it into HTML
    for our web-pages, or LaTeX for printing.
    </p>

    <p>
    In addition to the API documentation, we maintain a series of
    <a href="../tutorial/chapter-2.step-by-step/index.html" target="_top">
    well-documented example programs</a>, which also follow a certain
    ``literate programming'' style in that the explanations of what
    is happening are integrated into the program source by means of
    comments, and are extracted by small scripts.
    </p>

    <p>
    This document first explains the basics of 
    <a href="#API" target="body">documenting the API</a> and then of
    <a href="#examples" target="body">writing example programs</a>.
    </p>


    <a name="API">
    <h3>Writing API documentation</h3>

    <p>
    In order to extract documentation from the header files of the
    project, we use 
    <a href="http://www.doxygen.org/" target="_top">doxygen</a>.
    It requires that documentation is written in a form which
    closely follows the 
    <a href="http://java.sun.com/products/jdk/javadoc/index.html" target="_top">
    JavaDoc</a> standard.
    </p>


    <h4>Basic layout of documentation</h4>

    <p>
    Basically, every declaration, whether class or member
    function/variable declaration, global function or namespace, may
    be preceded by a comment of the following form:
    <code>
    <pre>
      /**
       * This is an example documentation.
       *
       * @author Wolfgang Bangerth, 2000
       */
      class TestClass 
      {
        public:
                 /**
		  * Constructor
		  */
          TestClass (); 

                 /**
		  * Example function
		  */
          virtual void test () const = 0;

                 /**
		  * Member variable
		  */
          const unsigned int abc;
      };
    </pre>
    </code>
    <acronym>doxygen</acronym> will then generate a page for the class
    <code>TestClass</code> and document each of the member functions
    and variables. The content of the <code>@author</code> tag will be
    included into the online documentation of the class.
    </p>


    <h4>Extended Layout</h4>

    <p>
    In order to allow better structured output for long comments,
    doxygen supports a great number of tags for enumerations,
    sectioning, markup, and other fields. For example, here is how to
    generate
    <ul> <li> <em>Itemized lists:</em>
         <p>
	 By writing comments like the following,
	 <code><pre>
	   /**
	    * <ul>
	    *   <li> foo
	    *   <li> bar
	    * </ul>
	    */
	 </pre></code>
	 you can get itemized lists both in the online and printed
	 documentation:
	 <ul>
	 <li> foo
	 <li> bar
	 </ul> 
	 </p>
	 
	 <p>
	 In other words, one can use standard HTML tags for this
	 task. Likewise, you can get numbered lists by using the
	 respective HTML tags <code>&lt;ol&gt;</code>.
	 </p>

    <li> <em>Verbatim output:</em>
         <p>
	 If you write comments like this,
	 <code><pre>
	   /**
	    * @verbatim
	    *   void foobar ()
	    *   {
	    *     i = 0;
	    *   };
	    * @endverbatim
	    */
	 </pre></code>
	 you will get the lines between the verbatim environment with
	 the same formatting and in typewriter font:
	 <code><pre>
     void foobar ()
     {
       i = 0;
     };
	 </pre></code>
	 This is useful if you want to include small sample code snippets
	 into your documentation. In particular, it is important that
	 the formatting is preserved, which is not the case for all
	 other text.
	 </p>

    <li> <em>Typewriter font:</em>
         <p>
	 One would often like to use a typewriter font for variable,
	 function, or class names. For this, the <code>@p
	 one_word_without_spaces</code> tag is used, which generates
	 output in which the single word after the tag is set in
	 typewriter font. If you want to put multiple words into
	 typewriter font, then enclosing them in the HTML
	 <code>&lt;tt&gt;</code> is the way to go.
	 </p>

	 <p>
	 As a convention, we always write variable and function
	 names as <code>@p name</code> in order to give them a visible
	 distinction.
	 </p>

    <li> <em>Emphasis:</em>
         <p>
	 To generate output in italics, use the <code>@em
	 one_word_without_spaces</code> tag.
	 </p>

    <li> <em>Sections:</em>
         <p>
	 Sections can be generated using <code>@section TAG Section_name,
	 tag. Here, <code>TAG</code> is a symbolic name for the
	 section, which can be used for cross references.
	 </p>
    </ul>
    </p>



    <a name="examples">
    <h3>Writing example programs</h3>

    <p>
    At present, the tools that extract information from the example
    programs are rather dumb. They are, to be precise, two Perl
    scripts located in the directory of the
    <code>deal.II/doc/tutorial</code> tree, where the HTML files are
    generated. In principle, they extract plain text from all comments
    in the programs that start with a double slash (C++ style
    comment). Everything else is interpreted as program text and is
    copied verbatim into the output.
    </p>

    <p>
    In the future, it would certainly help if the scripts understood
    something like a <code>title</code> or <code>section</code> tag
    (preferably something similar to the DocBook SGML commands for
    that) in the comments, which could help to better structure the
    output, especially for the longer programs. One would probably
    like to put a section break before each new function or class, or
    something along these lines.
    </p>


    <hr>
    
    <address>
      <a href="../mail.html">The deal.II mailing list</a></address>

  </body>
</html>

