<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                 "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <link href="../screen.css" rel="StyleSheet" media="screen">
    <title>The deal.II Homepage - Makefiles</title>
    <meta name="author" content="the deal.II authors <authors@dealii.org>">
    <meta name="keywords" content="deal.II"></head>
  <body>


    <h2>Makefiles for <acronym>deal.II</acronym> projects</h2>

    <p>
    The file <code>common/Make.global_options</code> exports several
    make variables to other Makefiles which 
    include it. You will want to include this file into the Makefiles of
    your project to use the same compiler flags and to access the paths
    to libraries. This page documents <a href="#flags">available
    flags</a>, documents the <a href="#values">values which are used
    in your local installation</a>, and shows 
    <a href="#generic">generic Makefiles</a> which you may want to use
    in your own projects.
    </p>

    <a name="flags"></a>
    <h3>Available flags</h3>

    <p>
    Following is a list of all available flags which are exported to
    other Makefiles, sorted into different categories:
    </p>

    <ul>
    <li><h4>General</h4>

    <dl>
      <dt> <code>D</code> </dt>
      <dd> <p>
           Path to the <acronym>deal.II</acronym> library
           </p>
      </dd>


      <dt> <code>CXX</code> </dt>
      <dd> <p>
           Executable name of the C++ compiler
           </p>
      </dd>


      <dt> <code>CC</code> </dt>
      <dd> <p>
           Executable name of the C compiler, which
           is used to generate shared libraries
           </p>
      </dd>


      <dt> <code>GXX-VERSION</code> </dt>
      <dd> <p>
           Name and version of the C++ compiler. Possible
	   names presently include <code>egcs1.1</code>,
	   <code>gcc2.95</code>, <code>gcc2.96</code>,
           <code>gcc2.97</code>, <code>gcc3.0</code>,
           <code>gcc3.1</code>, <code>gcc3.2</code>,
           <code>gcc3.3</code>, <code>gcc3.4</code>,
           <code>gcc4.0</code>,
           <code>ibm_xlc</code>, <code>MIPSpro</code>,
	   <code>sun_workshop</code>, <code>sun_forte</code>,
           <code>intel_icc5</code>, <code>intel_icc6</code>, 
           <code>intel_icc7</code>, <code>compaq_cxx</code>, and
           probably a few more as well. Not all of
           these compilers are actually supported (see the 
           <a href="../readme.html" target="body">ReadMe file</a> for a
           list of supported compilers and platforms), it is only a list of
           recognized compilers.
	   Note that the naming of this variable is historical (it
           should read <code>CXX-VERSION</code>), since
           it is also used even if the compiler is not the GNU C++
           compiler.
           </p>
      </dd>


      <dt> <code>GXX-VERSION-DETAILED</code> </dt>
      <dd> <p>
           Like GXX-VERSION, just that it may also contain the dot version
           number, for example gcc3.3.3.
           </p>
      </dd>

      <dt> <code>CC-VERSION</code> </dt>
      <dd> <p>
           Name and version of the CC compiler. Possible names are
           similar to the ones listed above.
           </p>
      </dd>


      <dt> <code>F77</code> </dt>
      <dd> <p>
           Executable name of the F77 compiler; often, no Fortran
           compiler is needed, in which case the variable may be empty if
           none was found
           </p>
      </dd>


      <dt> <code>F77-VERSION</code> </dt>
      <dd> <p>
           Name and version of the Fortran 77 compiler. Possible
	   names presently include <code>egcs1.1</code>,
	   <code>gcc2.95</code>, <code>gcc2.96</code>,
           <code>gcc2.97</code>, <code>gcc3.0</code>, <code>SunF77</code>,
	   <code>AIXF77</code>, <code>MIPSproF77</code>;
	   there may be others in the future, if we have access to
           other systems
           </p>
      </dd>


      <dt> <code>SHLIBLD</code> </dt>
      <dd> <p>
           Executable name of compiler that is used to link object
           files to shared libraries. This will usually be the C++
           compiler, but as this does not work for gcc 2.95, it is the
           C compiler in that case.
           </p>
      </dd>


      <dt> <code>OBJEXT</code> </dt>
      <dd> <p>
           Extension of object files. On unix, this is usually simply
           <code>o</code>, on Windows systems it is <code>obj</code>.
           </p>
      </dd>


      <dt> <code>EXEEXT</code> </dt>
      <dd> <p>
           Extension of executables. On unix, this is usually the
           empty strign, on Windows systems it is <code>.exe</code>.
           </p>
      </dd>

      <dt> <code>enable-shared</code> </dt>
      <dd> <p>
           Determines whether shared or static libraries are used.
           Set to <code>yes</code> if you want to use shared
           libraries.
           </p>
      </dd>

      <dt> <code>PERL</code> </dt>
      <dd> <p>
           Executable name of the `perl' program
           </p>
      </dd>


      <dt> <code>DEAL_II_MAJOR</code> </dt>
      <dd> <p>
           Major version number of the <acronym>deal.II</acronym>
           library, i.e. the number before the first dot. Note that
           this version number is also available in programs through a
           preprocessor variable
           </p>
      </dd>    


      <dt> <code>DEAL_II_MINOR</code> </dt>
      <dd> <p>
           Minor version number of the <acronym>deal.II</acronym>
	   library, i.e. the number after the first dot; if there are
           further numbers, like in version 3.0.1, then they are
           discarded as these versions only fix bugs but do not change
           features. Note that this version number is also available
           in programs through a preprocessor variable
           </p>
      </dd>    


      <dt> <code>TARGET</code> </dt>
      <dd> <p>
           The target triplet as returned by config.guess. For example, on the
	   system where I write this, it is i686-pc-linux-gnu, but it may also
	   be sparc-sun-solaris2.7, or whatever config.guess determines for
	   your system.
           </p>
      </dd>    


      <dt> <code>USE_CONTRIB_HSL</code> </dt>
      <dd> <p>
           <code>yes</code> indicates whether some subroutines from
           the HSL have been explicitely installed and shall be used
           by the library. <code>no</code> otherwise.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of HSL subroutines.)
           </p>
      </dd>    


      <dt> <code>USE_CONTRIB_PETSC</code> </dt>
      <dd> <p>
           <code>yes</code> indicates whether the interfaces to the PETSc
           library shall be compiled. <code>no</code> otherwise.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of PETSc.)
           </p>
      </dd>    


      <dt> <code>DEAL_II_PETSC_DIR</code> </dt>
      <dd> <p>
           If <code>USE_CONTRIB_PETSC</code> is <code>yes</code>, then this
           variable has the path to the PETSc library, as either given by the
           <code>PETSC_DIR</code> environment variable, or the
           <code>--with-petsc</code> switch on the command line upon 
	   configuration of the deal.II library.
           </p>
      </dd>    


      <dt> <code>DEAL_II_PETSC_ARCH</code> </dt>
      <dd> <p>
           If <code>USE_CONTRIB_PETSC</code> is <code>yes</code>, then this
           variable stores the architecture for which PETSc was compiled, as
           either given by the <code>PETSC_ARCH</code> environment variable,
           or the <code>--with-petsc-arch</code> switch on the command line
           upon configuration of the deal.II library.
           </p>
      </dd>    


      <dt> <code>USE_CONTRIB_METIS</code> </dt>
      <dd> <p>
           <code>yes</code> indicates whether the METIS library has been
           detected upon configuration, and whether we shall interface with
           it. <code>no</code> otherwise. (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of METIS.)
           </p>
      </dd>    


      <dt> <code>DEAL_II_METIS_DIR</code> </dt>
      <dd> <p>
           If <code>USE_CONTRIB_METIS</code> is <code>yes</code>, then this
           variable has the path to the METIS library, as either given by the
           <code>METIS_DIR</code> environment variable, or the
           <code>--with-metis</code> switch on the command line upon 
	   configuration of the deal.II library.
           </p>
      </dd>
    </dl>



    <li><h4>Paths to libraries</h4>

    <dl>
      <dt> <code>lib-path-base</code> </dt>
      <dd> <p>
           Path to the library files of the /base library
           </p>
      </dd>


      <dt> <code>lib-path-lac</code> </dt>
      <dd> <p>
           Same for the /lac library
           </p>
      </dd>


      <dt> <code>lib-path-deal2</code> </dt>
      <dd> <p>
           Same for the /deal.II library
           </p>
      </dd>


      <dt> <code>LIBPATH</code> </dt>
      <dd> <p>
           All the library pathes prefixed by -L, i.e. the
           flags needed by the compiler to find the libraries
           when they are linked in using -lbase -llac -ldeal_II_2d
           (for example). These -L paths are appended to what
           was in $(LIBPATH) before.
           </p>
      </dd>

      <dt> <code>LIBS</code> </dt>
      <dd> <p>
           Additional libraries to be linked in, such as Fortran
           support, or Tecplot libraries when binary output is available.
           </p>
      </dd>

      <dt> <code>F77LIBS</code> </dt>
      <dd> <p>
           Libraries to be linked in when we link with Fortran
           files. These libraries are checked at configuration time,
           and are included into <code>$(LIBS)</code> when they are
           actually needed
           </p>
      </dd>
    </dl>



    <li><h4>Paths and filenames of libraries</h4>

    <dl>
      <dt> <code>static-lib-suffix</code> </dt>
      <dd> <p>
           File extension of static libraries. Usually set to .a
           </p>
      </dd>
      <dt> <code>shared-lib-suffix</code> </dt>
      <dd> <p>
           File extension of shared libraries. If shared libraries
           are supported, this suffix is usually .so, if shared
           libraries are not supported, it is set to the same value
           as <code>static-lib-suffix</code>.
           </p>
      </dd>
      <dt> <code>lib-suffix</code> </dt>
      <dd> <p>
           File extension of libraries. Depending on the value of
           <code>enable-shared</code>, it is either set to 
           <code>static-lib-suffix</code> or to
           <code>shared-lib-suffix</code>.
           </p>
      </dd>
      <dt> <code>lib-base.o</code> </dt>
      <dd> <p>
           Path and filename of the base library in optimized
           mode. depending on whether shared libraries were
           or were not enabled, the suffix of the value of this
           variable is either .so or .a
           </p>
      </dd>


      <dt> <code>lib-base.g</code> </dt>
      <dd> <p>
           Same, for the library in debug mode
           </p>
      </dd>


      <dt> <code>lib-lac.o lib-lac.g</code> </dt>
      <dd> <p>
           Same for the lac libraries 
           </p>
      </dd>

      <dt> <code>lib-deal2-1d.o lib-deal2-1d.g
                 lib-deal2-2d.o lib-deal2-2d.g
                 lib-deal2-3d.o lib-deal2-3d.g</code> </dt>
      <dd> <p>
           Same for the deal.II libraries in the various dimensions
           </p>
      </dd>

      <dt> <code>lib-contrib-hsl</code> </dt>
      <dd> <p>
           Path and name of the library that contains the HSL
           subroutines explicitely installed.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of HSL
           subroutines.)
           </p>
      </dd>

      <dt> <code>lib-contrib-petsc.g lib-contrib-petsc.o</code> </dt>
      <dd> <p>
           Paths and names of the component libraries of the PETSc package, if
           found and used at configuration time.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of PETSc.)
           </p>
      </dd>

      <dt> <code>lib-contrib-metis</code> </dt>
      <dd> <p>
           Path and name of the METIS libraries, if
           found and used at configuration time.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of METIS.)
           </p>
      </dd>
    </dl>



    <li><h4>Paths to include files</h4>

    <dl>
      <dt> <code>INCLUDE</code> </dt>

      <dd> <p> All include paths figured out by the <tt>configure</tt>
      script are now included into the variable
      <code>$(INCLUDE)</code> (which include the compiler option
      <tt>-I</tt> in front of each directory). They are also
      automatically included in your compiler calls as soon as you use
      <code>$(CXXFLAGS.g)</code> or <code>$(CXXFLAGS.o)</code>. 
      </p>
      
      <p>An exception to this rule are paths listed below. These are
      added to the variable <code>$(INCLUDE)</code> only during make.
      </p>
      </dd>


      <dt> <code>include-path-contrib-petsc
                 include-path-contrib-petsc-bmake
           </code> </dt>
      <dd> <p>
           If PETSc is used, then these variables have the paths to the usual
           PETSc include files and the PETSc architecture dependent include
           files.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of PETSC.)
           </p>
      </dd>


      <dt> <code>include-path-contrib-metis
           </code> </dt>
      <dd> <p>
           If METIS is used, then this variable has the path to the METIS
           include files. (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of METIS.)
           </p>
      </dd>


      <dt> <code>INCLUDE</code> </dt>
      <dd> <p>
           All the include pathes prefixed by -I
           </p>
      </dd>
    </dl>


    <li><h4>Compiler flags</h4>

    <dl>
      <dt> <code>CXXFLAGS.g</code> </dt>
      <dd> <p>
           C++ compiler flags for debug mode
           </p>
      </dd>


      <dt> <code>CXXFLAGS.o</code> </dt>
      <dd> <p>
           C++ compiler flags for optimized mode
           </p>
      </dd>

      <dt> <code>CCFLAGS</code> </dt>
      <dd> <p>
           C compiler flags. Since we only compiler C code for
           third-party libraries for which we assume that they and our
           interfaces to them are bug free, these flags are always for
           optimized mode.
           </p>
      </dd>


      <dt> <code>F77FLAGS.g</code> </dt>
      <dd> <p>
           Fortran 77 compiler flags for debug mode
           </p>
      </dd>


      <dt> <code>F77FLAGS.o</code> </dt>
      <dd> <p>
           Fortran 77 compiler flags for optimized mode
           </p>
      </dd>
    </dl>



    <li><h4>Linker flags</h4>

    <dl>
      <dt> <code>LDFLAGS</code> </dt>
      <dd> <p>
           General linker flags
           </p>
      </dd>
    </dl>


    <li><h4>Variables in multithreading mode</h4>
 
    <dl>
      <dt> <code>with-multithreading</code> </dt>
      <dd> <p>
           This symbol is 'no' if the flag was not given
           to ./configure and 'posix' otherwise
           </p>
      </dd>
    </dl>

    <p>
    Note that in multithread mode, the compiler flags are augmented by
    the definition of the preprocessor variable
    <code>DEAL_II_USE_MT</code>, which you can use to find out whether
    your program shall use multithreading or not. 
    </p>


    <li><h4>Variables associated with Tecplot binary support</h4>
 
    <p>
    If ./configure, detects a valid Tecplot API installation $(INCLUDE) and
    $(LIBS) are augmented by the Tecplot API include and library paths, and
    the following symbols are meaningful:

    <dl>
      <dt> <code>TECIO_INCLUDE</code> </dt>
      <dd> <p>
           Path to the Tecplot API header files as found by ./configure
           </p>
      </dd>


      <dt> <code>TECIO_LIBRARY</code> </dt>
      <dd> <p>
           Path to the Tecplot API library
           </p>
      </dd>
    </dl>

    </ul>


    <a name="values"></a>
    <h3>Values of available flags</h3>
    
    In the copy of the library (your local one, or the one on the
    <acronym>deal.II</acronym> homepage) to which the file which you
    are presently viewing belongs, the flags documented above have the
    following values:
    
    <ul>

