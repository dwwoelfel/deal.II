<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
   "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
  <head>
    <link href="../screen.css" rel="StyleSheet" media="screen">
    <link href="../print.css" rel="StyleSheet" media="print">
    <title>The deal.II Homepage - Makefiles</title>
    <meta name="author" content="the deal.II authors <authors@dealii.org>">
    <meta name="keywords" content="deal.II"></head>
  <body>


    <h2>Makefiles for <acronym>deal.II</acronym> projects</h2>

    <p>
    The file <code>common/Make.global_options</code> exports several
    make variables to other Makefiles which 
    include it. You will want to include this file into the Makefiles of
    your project to use the same compiler flags and to access the pathes
    to libraries. This page documents <a href="#flags">available
    flags</a>, documents the <a href="#values">values which are used
    in your local installation</a>, and shows 
    <a href="#generic">generic Makefiles</a> which you may want to use
    in your own projects.
    </p>

    <a name="flags">
    <h3>Available flags</h3>

    <p>
    Following is a list of all available flags which are exported to
    other Makefiles, sorted into different categories:
    </p>

    <ul>
    <li><h4>General</h4></h4>

    <dl>
      <dt> <code>D</code> </dt>
      <dd> <p>
           Path to the <acronym>deal.II</acronym> library
           </p>
      </dd>


      <dt> <code>CXX</code> </dt>
      <dd> <p>
           Executable name of the C++ compiler
           </p>
      </dd>


      <dt> <code>CC</code> </dt>
      <dd> <p>
           Executable name of the C compiler, which
           is used to generate shared libraries
           </p>
      </dd>


      <dt> <code>GXX-VERSION</code> </dt>
      <dd> <p>
           Name and version of the C++ compiler. Possible
	   names presently include <code>egcs1.1</code>,
	   <code>gcc2.95</code>, <code>gcc2.96</code>,
           <code>gcc2.97</code>, <code>gcc3.0</code>,
           <code>ibm_xlc</code>, <code>MIPSpro</code>,
	   <code>sun_workshop</code>, <code>sun_forte</code>,
           <code>intel_icc</code>, <code>compaq_cxx</code>. Not all of
           these compilers are actually supported (see the 
           <a href="../readme.html" target="body">ReadMe file</a> for a
           list of supported compilers and platforms), it is only a list of
           recognized compilers.
	   Note that the naming of this variable is historical (it
           should read <code>CXX-VERSION</code>), since
           it is also used even if the compiler is not the GNU C++
           compiler.
           </p>
      </dd>


      <dt> <code>F77</code> </dt>
      <dd> <p>
           Executable name of the F77 compiler; often, no Fortran
           compiler is needed, in which case the variable may be empty if
           none was found
           </p>
      </dd>


      <dt> <code>F77-VERSION</code> </dt>
      <dd> <p>
           Name and version of the Fortran 77 compiler. Possible
	   names presently include <code>egcs1.1</code>,
	   <code>gcc2.95</code>, <code>gcc2.96</code>,
           <code>gcc2.97</code>, <code>gcc3.0</code>, <code>SunF77</code>,
	   <code>AIXF77</code>, <code>MIPSproF77</code>;
	   there may be others in the future, if we have access to
           other systems
           </p>
      </dd>


      <dt> <code>SHLIBLD</code> </dt>
      <dd> <p>
           Executable name of compiler that is used to link object
           files to shared libraries. This will usually be the C++
           compiler, but as this does not work for gcc 2.95, it is the
           C compiler in that case.
           </p>
      </dd>


      <dt> <code>PERL</code> </dt>
      <dd> <p>
           Executable name of the `perl' program
           </p>
      </dd>


      <dt> <code>DEAL_II_MAJOR</code> </dt>
      <dd> <p>
           Major version number of the <acronym>deal.II</acronym>
           library, i.e. the number before the first dot. Note that
           this version number is also available in programs through a
           preprocessor variable
           </p>
      </dd>    


      <dt> <code>DEAL_II_MINOR</code> </dt>
      <dd> <p>
           Minor version number of the <acronym>deal.II</acronym>
	   library, i.e. the number after the first dot; if there are
           further numbers, like in version 3.0.1, then they are
           discarded as these versions only fix bugs but do not change
           features. Note that this version number is also available
           in programs through a preprocessor variable
           </p>
      </dd>    


      <dt> <code>USE_CONTRIB_HSL</code> </dt>
      <dd> <p>
           <code>yes</code> indicates whether some subroutines from
           the HSL have been explicitely installed and shall be used
           by the library. <code>no</code> otherwise.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of HSL subroutines.)
           </p>
      </dd>    
    </dl>



    <li><h4>Paths to libraries</h4>

    <dl>
      <dt> <code>lib-path-base</code> </dt>
      <dd> <p>
           Path to the library files of the /base library
           </p>
      </dd>


      <dt> <code>lib-path-lac</code> </dt>
      <dd> <p>
           Same for the /lac library
           </p>
      </dd>


      <dt> <code>lib-path-deal2</code> </dt>
      <dd> <p>
           Same for the /deal.II library
           </p>
      </dd>


      <dt> <code>LIBPATH</code> </dt>
      <dd> <p>
           All the library pathes prefixed by -L, i.e. the
           flags needed by the compiler to find the libraries
           when they are linked in using -lbase -llac -ldeal_II_2d
           (for example). These -L paths are appended to what
           was in $(LIBPATH) before.
           </p>
      </dd>

      <dt> <code>LIBS</code> </dt>
      <dd> <p>
           Additional libraries to be linked in, such as Fortran
           support, the ACE library when multithreading is enabled, or
           Tecplot libraries when binary output is available.
           </p>
      </dd>

      <dt> <code>F77LIBS</code> </dt>
      <dd> <p>
           Libraries to be linked in when we link with Fortran
           files. These libraries are checked at configuration time,
           and are included into <code>$(LIBS)</code> when they are
           actually needed
           </p>
      </dd>
    </dl>



    <li><h4>Paths and filenames of libraries</h4>

    <dl>
      <dt> <code>lib-base.o</code> </dt>
      <dd> <p>
           Path and filename of the base library in optimized
           mode. depending on whether shared libraries were
           or were not enabled, the suffix of the value of this
           variable is either .so or .a
           </p>
      </dd>


      <dt> <code>lib-base.g</code> </dt>
      <dd> <p>
           Same, for the library in debug mode
           </p>
      </dd>


      <dt> <code>lib-lac.o lib-lac.g</code> </dt>
      <dd> <p>
           Same for the lac libraries 
           </p>
      </dd>

      <dt> <code>lib-deal2-1d.o lib-deal2-1d.g
                 lib-deal2-2d.o lib-deal2-2d.g
                 lib-deal2-3d.o lib-deal2-3d.g</code> </dt>
      <dd> <p>
           Same for the deal.II libraries in the various dimensions
           </p>
      </dd>

      <dt> <code>lib-contrib-hsl</code> </dt>
      <dd> <p>
           Path and name of the library that contains the HSL
           subroutines explicitely installed.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of HSL
           subroutines.)
           </p>
      </dd>
    </dl>



    <li><h4>Pathes to include files</h4>

    <dl>
      <dt> <code>include-path-base</code> </dt>
      <dd> <p>
           Same as for lib-path-base, but contains the paths
           to the include files of the /base library. Note, however,
	   that since files are usually included as <code>#include
	   &lt;base/xxx.h&gt;</code>, the value of the
	   <code>include-path-base</code> only leads up to the directory
	   directly above the include files. They are thus located in
	   <code>$(include-path-base)/base</code>.
           </p>
      </dd>


      <dt> <code>include-path-lac</code> </dt>
      <dd> <p>
           Same for the /lac library. The files are in
	   <code>$(include-path-lac)/lac</code>.
           </p>
      </dd>


      <dt> <code>include-path-contrib-hsl</code> </dt>
      <dd> <p>
           If some HSL files are
           installed, this path points to includes for the
           declaration of C bindings to these functions.
	   (See the
	   <a href="../readme.html#external-libs" target="body">ReadMe</a>
	   file for more information on installation of HSL
           subroutines.)
           </p>
      </dd>


      <dt> <code>include-path-deal2</code> </dt>
      <dd> <p>
           Same for the /deal.II library. Include files are in
           <code>$(include-path-deal2)/*</code>.
	   </p>
      </dd>


      <dt> <code>INCLUDE</code> </dt>
      <dd> <p>
           All the include pathes prefixed by -I
           </p>
      </dd>
    </dl>


    <li><h4>Compiler flags</h4>

    <dl>
      <dt> <code>CXXFLAGS.g</code> </dt>
      <dd> <p>
           C++ compiler flags for debug mode
           </p>
      </dd>


      <dt> <code>CXXFLAGS.o</code> </dt>
      <dd> <p>
           C++ compiler flags for optimized mode
           </p>
      </dd>

      <dt> <code>F77FLAGS.g</code> </dt>
      <dd> <p>
           Fortran 77 compiler flags for debug mode
           </p>
      </dd>


      <dt> <code>F77FLAGS.o</code> </dt>
      <dd> <p>
           Fortran 77 compiler flags for optimized mode
           </p>
      </dd>
    </dl>



    <li><h4>Linker flags</h4>

    <dl>
      <dt> <code>LDFLAGS</code> </dt>
      <dd> <p>
           General linker flags
           </p>
      </dd>
    </dl>


    <li><h4>Variables in multithreading mode</h4>
 
    <p>
    If --with-multithreading was given to ./configure, $(INCLUDE) and
    $(LIBPATH) are augmented by the ACE include and library paths, and
    the following symbols are meaningful:

    <dl>
      <dt> <code>ACE_ROOT</code> </dt>
      <dd> <p>
           Path to the ACE library as given to ./configure
           </p>
      </dd>


      <dt> <code>lib-ACE</code> </dt>
      <dd> <p>
           Path and name of the ACE library
           </p>
      </dd>


      <dt> <code>with-multithreading</code> </dt>
      <dd> <p>
           This symbol is 'no' if the flag was not given
           to ./configure and not 'no' (it actually equals
           $(ACE_ROOT)) if -with-multithreading=... was
           given
           </p>
      </dd>
    </dl>

    <p>
    Note that in multithread mode, the compiler flags are augmented by
    the definition of the preprocessor variable
    <code>DEAL_II_USE_MT</code>, which you can use to find out whether
    your program shall use multithreading or not. 
    </p>


    <li><h4>Variables associated with Tecplot binary support</h4>
 
    <p>
    If ./configure, detects a valid Tecplot API installation $(INCLUDE) and
    $(LIBS) are augmented by the Tecplot API include and library paths, and
    the following symbols are meaningful:

    <dl>
      <dt> <code>TECIO_INCLUDE</code> </dt>
      <dd> <p>
           Path to the Tecplot API header files as found by ./configure
           </p>
      </dd>


      <dt> <code>TECIO_LIBRARY</code> </dt>
      <dd> <p>
           Path to the Tecplot API library
           </p>
      </dd>
    </dl>

    </ul>


    <a name="values">
    <h3>Values of available flags</h3>
    
    In the copy of the library (your local one, or the one on the
    <acronym>deal.II</acronym> homepage) to which the file which you
    are presently viewing belongs, the flags documented above have the
    following values:
    
    <ul>

