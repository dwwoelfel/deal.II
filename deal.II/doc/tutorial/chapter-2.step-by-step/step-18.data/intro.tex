\documentclass{article}
\usepackage{amsmath}

\begin{document}

This tutorial program is another one in the series on the elasticity problem
that we have already started with step-8 and step-17. It extends it into two
different directions: first, it solves the quasistatic but time dependent
elasticity problem for large deformations with a Lagrangian mesh movement
approach. Secondly, it shows some more techniques for solving such problems
using parallel processing with PETSc's linear algebra; however, as before in
step-17, the program runs just as fine on a single sequential machine as long
as you have PETSc installed. In addition to this, we show how to work around
the main bottleneck of step-17, namely there that we only generated graphical
output from one process, and that this scaled very badly with larger numbers
of processes and on large problems. Finally, a good number of assorted
improvements and techniques are demonstrated that have not been shown yet in
previous programs.


\subsection*{Quasistatic elastic deformation}

In general, elastic deformation is described by the elastic wave equation
\begin{gather*}
  \rho
\end{gather*}



\subsection*{Parallel graphical output}

In the step-17 example program, the main bottleneck for parallel computations
was that only the first processor generated output for the entire domain.
Since generating graphical output is expensive, this did not scale well when
large numbers of processors were involved. However, no viable ways around this
problem were implemented in the library at the time, and the problem was
deferred to a later version.

This functionality has been implemented in the meantime, and this is the time
to explain its use. Basically, what we need to do is let every process
generate graphical output for that subset of cells that it owns, write them
into separate files and have a way to merge them later on. At this point, it
should be noted that none of the graphical output formats known to the author
of this program allows for a simple way to later re-read it and merge it with
other files corresponding to the same simulation. What deal.II therefore
offers is the following: When you call the ``DataOut::build\_patches''
function, an intermediate format is generated that contains all the
information for the data on each cell. Usually, this intermediate format is
then further processed and converted into one of the graphical formats that we
can presently write, such as gmv, eps, ucd, gnuplot, or a number of other
ones. Once written in these formats, there is no way to reconstruct the
necessary information to merge multiple blocks of output. However, the base
classes of ``DataOut'' also allows to simply dump the intermediate format to a
file, from which it can later be recovered without loss of information.

This has two advantages: first, simulations may just dump the intermediate
format data during run-time, and the user may later decide which particular
graphics format she wants to have. This way, she does not have to re-run the
entire simulation if graphical output is requested in a different format. One
typical case is that one would like to take a quick loook at the data with
gnuplot, and then create high-quality pictures using GMV or OpenDX. Since both
can be generated out of the intermediate format without problem, there is no
need to re-run the simulation.

In the present context, of more interest is the fact that in contrast to any
of the other formats, it is simple to merge multiple files of intermediate
format, if they belong to the same simulation. This is what we will do here:
we will generate one output file in intermediate format for each processor
that belongs to this computation (in the sequential case, this will simply be
a single file). They may then later be read in and merged so that we can
output a single file in whatever graphical format is requested.

The way to do this is to first instruct the ``DataOutBase'' class to write intermediate format rather than in gmv or any other graphical format. This is simple: just use ``data_out.write_deal_II_intermediate''.

HOW??


\end{document}
